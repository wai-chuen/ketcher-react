{"code":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { Action, Atom, Bond, FunctionalGroup, SGroup, fromAtomAddition, fromAtomsAttrs, fromBondAddition, fromFragmentDeletion, fromSgroupDeletion, ElementColor } from 'ketcher-core';\r\nimport utils from '../shared/utils';\r\nclass AtomTool {\r\n    editor;\r\n    atomProps;\r\n    dragCtx;\r\n    #bondProps;\r\n    isNotActiveTool;\r\n    constructor(editor, atomProps) {\r\n        this.editor = editor;\r\n        this.atomProps = atomProps;\r\n        this.#bondProps = { type: 1, stereo: Bond.PATTERN.STEREO.NONE };\r\n        this.editor.hoverIcon\r\n            .show()\r\n            .attr('text', `${atomProps.label}`)\r\n            .attr('fill', `${ElementColor[atomProps.label]}`);\r\n        this.editor.updateHoverIconPosition();\r\n        if (editor.selection()) {\r\n            if (editor.selection()?.atoms) {\r\n                const action = fromAtomsAttrs(editor.render.ctab, editor.selection().atoms, atomProps, true);\r\n                editor.update(action);\r\n                editor.selection(null);\r\n            }\r\n            this.isNotActiveTool = true;\r\n        }\r\n    }\r\n    mousedown(event) {\r\n        const struct = this.editor.render.ctab;\r\n        const sgroups = struct.sgroups;\r\n        const molecule = struct.molecule;\r\n        const functionalGroups = molecule.functionalGroups;\r\n        this.editor.hover(null);\r\n        this.editor.selection(null);\r\n        const ci = this.editor.findItem(event, ['atoms', 'functionalGroups']);\r\n        if (ci &&\r\n            ci.map === 'functionalGroups' &&\r\n            functionalGroups &&\r\n            FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)) {\r\n            const action = new Action();\r\n            const selectedSgroup = sgroups.get(ci.id);\r\n            const sGroupAtoms = SGroup.getAtoms(molecule, selectedSgroup?.item);\r\n            const [firstAtom, ...atoms] = sGroupAtoms;\r\n            const atomNeighbours = molecule.atomGetNeighbors(firstAtom);\r\n            const extraNeighbour = atomNeighbours?.some((atom) => !sGroupAtoms.includes(atom.aid));\r\n            if (extraNeighbour) {\r\n                action.mergeWith(fromSgroupDeletion(struct, ci.id));\r\n                action.mergeWith(fromFragmentDeletion(struct, { atoms: atoms }));\r\n                action.mergeWith(fromAtomsAttrs(struct, firstAtom, this.atomProps, true));\r\n            }\r\n            else {\r\n                const firstAtomPp = struct.atoms.get(firstAtom)?.a.pp;\r\n                action.mergeWith(fromFragmentDeletion(struct, {\r\n                    atoms: SGroup.getAtoms(molecule, selectedSgroup?.item),\r\n                    bonds: SGroup.getBonds(molecule, selectedSgroup?.item)\r\n                }));\r\n                action.mergeWith(fromAtomAddition(struct, firstAtomPp, this.atomProps));\r\n            }\r\n            this.editor.update(action);\r\n        }\r\n        const atomResult = [];\r\n        const result = [];\r\n        if (ci && functionalGroups.size && ci.map === 'atoms') {\r\n            const atomId = FunctionalGroup.atomsInFunctionalGroup(functionalGroups, ci.id);\r\n            if (atomId !== null)\r\n                atomResult.push(atomId);\r\n        }\r\n        if (atomResult.length > 0) {\r\n            for (const id of atomResult) {\r\n                const fgId = FunctionalGroup.findFunctionalGroupByAtom(functionalGroups, id);\r\n                if (fgId !== null && !result.includes(fgId)) {\r\n                    result.push(fgId);\r\n                }\r\n            }\r\n            this.editor.event.removeFG.dispatch({ fgIds: result });\r\n            return;\r\n        }\r\n        if (!ci) {\r\n            // ci.type == 'Canvas'\r\n            this.dragCtx = {};\r\n        }\r\n        else if (ci.map === 'atoms') {\r\n            this.dragCtx = { item: ci };\r\n        }\r\n    }\r\n    mouseLeaveClientArea() {\r\n        this.editor.hoverIcon.hide();\r\n    }\r\n    mouseover() {\r\n        this.editor.hoverIcon.show();\r\n        this.editor.updateHoverIconPosition();\r\n    }\r\n    mousemove(event) {\r\n        this.editor.hoverIcon.show();\r\n        const rnd = this.editor.render;\r\n        const { layerX, layerY } = event;\r\n        if (!this.dragCtx || !this.dragCtx.item) {\r\n            const { height, width } = this.editor.hoverIcon.getBBox();\r\n            this.editor.hoverIcon.attr({\r\n                x: layerX - width / 2,\r\n                y: layerY - height / 2\r\n            });\r\n            this.editor.hover(this.editor.findItem(event, ['atoms', 'functionalGroups']), null, event);\r\n            return;\r\n        }\r\n        const dragCtx = this.dragCtx;\r\n        const ci = this.editor.findItem(event, ['atoms']);\r\n        if (ci && ci.map === 'atoms' && ci.id === dragCtx.item.id) {\r\n            // fromAtomsAttrs\r\n            this.editor.hover(this.editor.findItem(event, ['atoms']));\r\n            return;\r\n        }\r\n        // fromAtomAddition\r\n        const atom = rnd.ctab.molecule.atoms.get(dragCtx.item.id);\r\n        let angle = utils.calcAngle(atom?.pp, rnd.page2obj(event));\r\n        if (!event.ctrlKey)\r\n            angle = utils.fracAngle(angle, null);\r\n        const degrees = utils.degrees(angle);\r\n        this.editor.event.message.dispatch({ info: degrees + 'ยบ' });\r\n        const newAtomPos = utils.calcNewAtomPos(atom?.pp, rnd.page2obj(event), event.ctrlKey);\r\n        if (dragCtx.action)\r\n            dragCtx.action.perform(rnd.ctab);\r\n        dragCtx.action = fromBondAddition(rnd.ctab, this.#bondProps, dragCtx.item.id, Object.assign({}, this.atomProps), newAtomPos, newAtomPos)[0];\r\n        this.editor.update(dragCtx.action, true);\r\n    }\r\n    mouseup(event) {\r\n        const struct = this.editor.render.ctab;\r\n        const molecule = struct.molecule;\r\n        const functionalGroups = molecule.functionalGroups;\r\n        const ci = this.editor.findItem(event, ['atoms', 'bonds']);\r\n        const atomResult = [];\r\n        const result = [];\r\n        if (ci && functionalGroups && ci.map === 'atoms') {\r\n            const atomId = FunctionalGroup.atomsInFunctionalGroup(functionalGroups, ci.id);\r\n            if (atomId !== null)\r\n                atomResult.push(atomId);\r\n        }\r\n        if (atomResult.length > 0) {\r\n            for (const id of atomResult) {\r\n                const fgId = FunctionalGroup.findFunctionalGroupByAtom(functionalGroups, id);\r\n                if (fgId !== null && !result.includes(fgId)) {\r\n                    result.push(fgId);\r\n                }\r\n            }\r\n            this.editor.event.removeFG.dispatch({ fgIds: result });\r\n            return;\r\n        }\r\n        if (this.dragCtx) {\r\n            const dragCtx = this.dragCtx;\r\n            const rnd = this.editor.render;\r\n            this.editor.update(dragCtx.action ||\r\n                (dragCtx.item\r\n                    ? fromAtomsAttrs(rnd.ctab, dragCtx.item.id, this.atomProps, true)\r\n                    : fromAtomAddition(rnd.ctab, rnd.page2obj(event), this.atomProps)));\r\n            delete this.dragCtx;\r\n        }\r\n        this.editor.event.message.dispatch({\r\n            info: false\r\n        });\r\n        this.editor.hover(this.editor.findItem(event, ['atoms', 'functionalGroups']), null, event);\r\n    }\r\n}\r\nexport function atomLongtapEvent(tool, render) {\r\n    const { dragCtx, editor } = tool;\r\n    const atomid = dragCtx.item?.id;\r\n    const fgs = render.ctab.molecule.functionalGroups;\r\n    // edit atom or add atom\r\n    const atom = atomid !== undefined && atomid !== null\r\n        ? render.ctab.molecule.atoms.get(atomid)\r\n        : new Atom({ label: '' });\r\n    const fgId = FunctionalGroup.findFunctionalGroupByAtom(fgs, atomid);\r\n    // TODO: longtab event\r\n    dragCtx.timeout = setTimeout(() => {\r\n        delete tool.dragCtx;\r\n        if (fgId != null) {\r\n            editor.event.removeFG.dispatch({ fgIds: [fgId] });\r\n            return;\r\n        }\r\n        editor.selection(null);\r\n        const res = editor.event.quickEdit.dispatch(atom);\r\n        Promise.resolve(res)\r\n            .then((newatom) => {\r\n            const action = atomid\r\n                ? fromAtomsAttrs(render.ctab, atomid, newatom, null)\r\n                : fromAtomAddition(render.ctab, dragCtx.xy0, newatom);\r\n            editor.update(action);\r\n        })\r\n            .catch(() => null); // w/o changes\r\n    }, 750);\r\n    dragCtx.stopTapping = function () {\r\n        if (dragCtx.timeout) {\r\n            clearTimeout(dragCtx.timeout);\r\n            delete dragCtx.timeout;\r\n        }\r\n    };\r\n}\r\nexport default AtomTool;\r\n//# sourceMappingURL=atom.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/dist/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/editor/Editor.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/editor/shared/utils.js"],"map":"{\"version\":3,\"file\":\"atom.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/script/editor/tool/atom.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/script/editor/tool/atom.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport Editor from '../Editor';\r\ndeclare class AtomTool {\r\n    #private;\r\n    editor: Editor;\r\n    atomProps: any;\r\n    dragCtx: any;\r\n    isNotActiveTool: boolean | undefined;\r\n    constructor(editor: any, atomProps: any);\r\n    mousedown(event: any): void;\r\n    mouseLeaveClientArea(): void;\r\n    mouseover(): void;\r\n    mousemove(event: any): void;\r\n    mouseup(event: any): void;\r\n}\r\nexport declare function atomLongtapEvent(tool: any, render: any): void;\r\nexport default AtomTool;\r\n"}}
