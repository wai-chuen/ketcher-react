{"code":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { fromArrowDeletion, fromFragmentDeletion, fromOneAtomDeletion, fromOneBondDeletion, fromPlusDeletion, fromSgroupDeletion, fromSimpleObjectDeletion, fromTextDeletion, FunctionalGroup, SGroup } from 'ketcher-core';\r\nimport LassoHelper from './helper/lasso';\r\nimport { selMerge } from './select';\r\nclass EraserTool {\r\n    editor;\r\n    maps;\r\n    lassoHelper;\r\n    isNotActiveTool;\r\n    constructor(editor, mode) {\r\n        this.editor = editor;\r\n        this.maps = [\r\n            'atoms',\r\n            'bonds',\r\n            'rxnArrows',\r\n            'rxnPluses',\r\n            'sgroups',\r\n            'functionalGroups',\r\n            'sgroupData',\r\n            'simpleObjects',\r\n            'texts'\r\n        ];\r\n        this.lassoHelper = new LassoHelper(mode || 0, editor, null);\r\n        if (editor.selection()) {\r\n            const action = fromFragmentDeletion(editor.render.ctab, editor.selection());\r\n            editor.update(action);\r\n            editor.selection(null);\r\n            this.isNotActiveTool = true;\r\n        }\r\n    }\r\n    mousedown(event) {\r\n        const ci = this.editor.findItem(event, this.maps);\r\n        if (!ci) {\r\n            //  ci.type == 'Canvas'\r\n            this.lassoHelper.begin(event);\r\n        }\r\n    }\r\n    mousemove(event) {\r\n        if (this.lassoHelper.running()) {\r\n            this.editor.selection(this.lassoHelper.addPoint(event));\r\n        }\r\n        else {\r\n            this.editor.hover(this.editor.findItem(event, this.maps), null, event);\r\n        }\r\n    }\r\n    mouseup() {\r\n        const struct = this.editor.render.ctab;\r\n        const sgroups = struct.sgroups;\r\n        const molecule = struct.molecule;\r\n        const functionalGroups = molecule.functionalGroups;\r\n        const selected = this.editor.selection();\r\n        const newSelected = { atoms: [], bonds: [] };\r\n        let actualSgroupId;\r\n        const atomsResult = [];\r\n        const bondsResult = [];\r\n        const preResult = [];\r\n        if (selected && functionalGroups.size && selected.atoms) {\r\n            for (const atom of selected.atoms) {\r\n                const atomId = FunctionalGroup.atomsInFunctionalGroup(functionalGroups, atom);\r\n                const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\r\n                if (atomFromStruct) {\r\n                    for (const sgId of atomFromStruct.sgs.values()) {\r\n                        actualSgroupId = sgId;\r\n                    }\r\n                }\r\n                if (atomFromStruct &&\r\n                    FunctionalGroup.isAtomInContractedFunctionalGroup(atomFromStruct, sgroups, functionalGroups, true)) {\r\n                    const sgroupAtoms = actualSgroupId !== undefined &&\r\n                        SGroup.getAtoms(molecule, struct.sgroups.get(actualSgroupId)?.item);\r\n                    const sgroupBonds = actualSgroupId !== undefined &&\r\n                        SGroup.getBonds(molecule, struct.sgroups.get(actualSgroupId)?.item);\r\n                    atom === sgroupAtoms[0] &&\r\n                        newSelected.atoms.push(...sgroupAtoms) &&\r\n                        newSelected.bonds.push(...sgroupBonds);\r\n                }\r\n                if (atomFromStruct &&\r\n                    !FunctionalGroup.isAtomInContractedFunctionalGroup(atomFromStruct, sgroups, functionalGroups, true)) {\r\n                    atomsResult.push(atomId);\r\n                }\r\n            }\r\n        }\r\n        if (selected && functionalGroups.size && selected.bonds) {\r\n            for (const bond of selected.bonds) {\r\n                const bondId = FunctionalGroup.bondsInFunctionalGroup(molecule, functionalGroups, bond);\r\n                const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\r\n                if (bondFromStruct &&\r\n                    !FunctionalGroup.isBondInContractedFunctionalGroup(bondFromStruct, sgroups, functionalGroups)) {\r\n                    bondsResult.push(bondId);\r\n                }\r\n            }\r\n        }\r\n        if (atomsResult.length > 0) {\r\n            for (const id of atomsResult) {\r\n                const fgId = FunctionalGroup.findFunctionalGroupByAtom(functionalGroups, id);\r\n                fgId !== null && !preResult.includes(fgId) && preResult.push(fgId);\r\n            }\r\n        }\r\n        if (bondsResult.length > 0) {\r\n            for (const id of bondsResult) {\r\n                const fgId = FunctionalGroup.findFunctionalGroupByBond(molecule, functionalGroups, id);\r\n                fgId !== null && !preResult.includes(fgId) && preResult.push(fgId);\r\n            }\r\n        }\r\n        if (preResult.length > 0) {\r\n            const result = [];\r\n            preResult.forEach((fgId) => {\r\n                const sgAtoms = sgroups.get(fgId)?.item.atoms;\r\n                sgAtoms.forEach((atom) => {\r\n                    !atomsResult.includes(atom) &&\r\n                        !result.includes(fgId) &&\r\n                        result.push(fgId);\r\n                });\r\n            });\r\n            if (result.length > 0) {\r\n                this.editor.selection(null);\r\n                this.editor.event.removeFG.dispatch({ fgIds: result });\r\n                this.lassoHelper.cancel();\r\n            }\r\n        }\r\n        // eslint-disable-line max-statements\r\n        const rnd = this.editor.render;\r\n        if (this.lassoHelper.running()) {\r\n            // TODO it catches more events than needed, to be re-factored\r\n            const sel = newSelected.atoms.length > 0\r\n                ? selMerge(this.lassoHelper.end(), newSelected, false)\r\n                : this.lassoHelper.end();\r\n            this.editor.update(fromFragmentDeletion(rnd.ctab, sel));\r\n            this.editor.selection(null);\r\n        }\r\n    }\r\n    click(event) {\r\n        const rnd = this.editor.render;\r\n        const restruct = rnd.ctab;\r\n        const sgroups = restruct.sgroups;\r\n        const molecule = restruct.molecule;\r\n        const functionalGroups = molecule.functionalGroups;\r\n        const ci = this.editor.findItem(event, this.maps);\r\n        const atomResult = [];\r\n        const bondResult = [];\r\n        const result = [];\r\n        if (ci &&\r\n            functionalGroups &&\r\n            ci.map === 'functionalGroups' &&\r\n            !FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)) {\r\n            const sGroup = sgroups.get(ci.id);\r\n            if (FunctionalGroup.isFunctionalGroup(sGroup?.item)) {\r\n                result.push(ci.id);\r\n            }\r\n        }\r\n        else if (ci && functionalGroups && ci.map === 'atoms') {\r\n            const atomId = FunctionalGroup.atomsInFunctionalGroup(functionalGroups, ci.id);\r\n            const atomFromStruct = atomId !== null && restruct.atoms.get(atomId)?.a;\r\n            if (atomFromStruct &&\r\n                !FunctionalGroup.isAtomInContractedFunctionalGroup(atomFromStruct, sgroups, functionalGroups, true)) {\r\n                atomResult.push(atomId);\r\n            }\r\n        }\r\n        else if (ci && functionalGroups && ci.map === 'bonds') {\r\n            const bondId = FunctionalGroup.bondsInFunctionalGroup(molecule, functionalGroups, ci.id);\r\n            const bondFromStruct = bondId !== null && restruct.bonds.get(bondId)?.b;\r\n            if (bondFromStruct &&\r\n                !FunctionalGroup.isBondInContractedFunctionalGroup(bondFromStruct, sgroups, functionalGroups)) {\r\n                bondResult.push(bondId);\r\n            }\r\n        }\r\n        if (atomResult.length) {\r\n            for (const id of atomResult) {\r\n                const fgId = FunctionalGroup.findFunctionalGroupByAtom(functionalGroups, id);\r\n                if (fgId !== null && !result.includes(fgId)) {\r\n                    result.push(fgId);\r\n                }\r\n            }\r\n        }\r\n        else if (bondResult.length) {\r\n            for (const id of bondResult) {\r\n                const fgId = FunctionalGroup.findFunctionalGroupByBond(molecule, functionalGroups, id);\r\n                if (fgId !== null && !result.includes(fgId)) {\r\n                    result.push(fgId);\r\n                }\r\n            }\r\n        }\r\n        if (result.length) {\r\n            this.editor.event.removeFG.dispatch({ fgIds: result });\r\n            return;\r\n        }\r\n        if (!ci)\r\n            return; // ci.type == 'Canvas'\r\n        this.editor.hover(null);\r\n        if (ci.map === 'atoms') {\r\n            this.editor.update(fromOneAtomDeletion(restruct, ci.id));\r\n        }\r\n        else if (ci.map === 'bonds') {\r\n            this.editor.update(fromOneBondDeletion(restruct, ci.id));\r\n        }\r\n        else if (ci.map === 'functionalGroups' &&\r\n            FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)) {\r\n            const sGroup = sgroups.get(ci.id);\r\n            this.editor.update(fromFragmentDeletion(rnd.ctab, {\r\n                atoms: [...SGroup.getAtoms(molecule, sGroup?.item)],\r\n                bonds: [...SGroup.getBonds(molecule, sGroup?.item)]\r\n            }));\r\n        }\r\n        else if (ci.map === 'sgroups' || ci.map === 'sgroupData') {\r\n            const sGroup = sgroups.get(ci.id);\r\n            if (FunctionalGroup.isFunctionalGroup(sGroup?.item)) {\r\n                this.editor.event.removeFG.dispatch({ fgIds: [ci.id] });\r\n            }\r\n            else {\r\n                this.editor.update(fromSgroupDeletion(restruct, ci.id));\r\n            }\r\n        }\r\n        else if (ci.map === 'rxnArrows') {\r\n            this.editor.update(fromArrowDeletion(restruct, ci.id));\r\n        }\r\n        else if (ci.map === 'rxnPluses') {\r\n            this.editor.update(fromPlusDeletion(restruct, ci.id));\r\n        }\r\n        else if (ci.map === 'simpleObjects') {\r\n            this.editor.update(fromSimpleObjectDeletion(restruct, ci.id));\r\n        }\r\n        else if (ci.map === 'texts') {\r\n            this.editor.update(fromTextDeletion(restruct, ci.id));\r\n        }\r\n        else {\r\n            // TODO re-factoring needed - should be \"map-independent\"\r\n            console.error('EraserTool: unable to delete the object ' + ci.map + '[' + ci.id + ']');\r\n            return;\r\n        }\r\n        this.editor.selection(null);\r\n    }\r\n    mouseleave() {\r\n        this.mouseup();\r\n    }\r\n    cancel() {\r\n        if (this.lassoHelper.running()) {\r\n            this.lassoHelper.end();\r\n        }\r\n        this.editor.selection(null);\r\n    }\r\n}\r\nexport default EraserTool;\r\n//# sourceMappingURL=eraser.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/dist/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/editor/tool/helper/lasso.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/editor/tool/select.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/editor/Editor.ts"],"map":"{\"version\":3,\"file\":\"eraser.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/script/editor/tool/eraser.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/script/editor/tool/eraser.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport LassoHelper from './helper/lasso';\r\nimport Editor from '../Editor';\r\ndeclare class EraserTool {\r\n    editor: Editor;\r\n    maps: Array<string>;\r\n    lassoHelper: LassoHelper;\r\n    isNotActiveTool: boolean | undefined;\r\n    constructor(editor: any, mode: any);\r\n    mousedown(event: any): void;\r\n    mousemove(event: any): void;\r\n    mouseup(): void;\r\n    click(event: any): void;\r\n    mouseleave(): void;\r\n    cancel(): void;\r\n}\r\nexport default EraserTool;\r\n"}}
