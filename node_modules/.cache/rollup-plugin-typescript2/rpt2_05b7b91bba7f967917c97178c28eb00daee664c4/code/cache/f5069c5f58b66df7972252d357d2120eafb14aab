{"code":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { Scale } from 'ketcher-core';\r\nimport locate from './locate';\r\nclass LassoHelper {\r\n    mode;\r\n    editor;\r\n    fragment;\r\n    points;\r\n    selection;\r\n    constructor(mode, editor, fragment) {\r\n        this.mode = mode;\r\n        this.fragment = fragment;\r\n        this.editor = editor;\r\n    }\r\n    getSelection() {\r\n        const rnd = this.editor.render;\r\n        if (this.mode === 0) {\r\n            return locate.inPolygon(rnd.ctab, this.points);\r\n        }\r\n        if (this.mode === 1) {\r\n            return locate.inRectangle(rnd.ctab, this.points[0], this.points[1]);\r\n        }\r\n        throw new Error('Selector mode unknown'); // eslint-disable-line no-else-return\r\n    }\r\n    begin(event) {\r\n        const rnd = this.editor.render;\r\n        this.points = [rnd.page2obj(event)];\r\n        if (this.mode === 1) {\r\n            this.points.push(this.points[0]);\r\n        }\r\n    }\r\n    running() {\r\n        return !!this.points;\r\n    }\r\n    addPoint(event) {\r\n        if (!this.points) {\r\n            return null;\r\n        }\r\n        const rnd = this.editor.render;\r\n        if (this.mode === 0) {\r\n            this.points.push(rnd.page2obj(event));\r\n        }\r\n        else if (this.mode === 1) {\r\n            this.points = [this.points[0], rnd.page2obj(event)];\r\n        }\r\n        this.update();\r\n        return this.getSelection();\r\n    }\r\n    update() {\r\n        if (this.selection) {\r\n            this.selection.remove();\r\n            this.selection = null;\r\n        }\r\n        if (this.points && this.points.length > 1) {\r\n            const rnd = this.editor.render;\r\n            const dp = this.points.map((p) => Scale.obj2scaled(p, rnd.options).add(rnd.options.offset));\r\n            this.selection =\r\n                this.mode === 0\r\n                    ? rnd.selectionPolygon(dp)\r\n                    : rnd.selectionRectangle(dp[0], dp[1]);\r\n        }\r\n    }\r\n    end() {\r\n        const ret = this.getSelection();\r\n        this.points = null;\r\n        this.update();\r\n        return ret;\r\n    }\r\n    cancel() {\r\n        this.points = null;\r\n        this.update();\r\n    }\r\n}\r\nexport default LassoHelper;\r\n//# sourceMappingURL=lasso.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/dist/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/editor/tool/helper/locate.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/editor/Editor.ts"],"map":"{\"version\":3,\"file\":\"lasso.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/script/editor/tool/helper/lasso.ts\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;6EAc6E;AAE7E,OAAO,EAAE,KAAK,EAAE,MAAM,cAAc,CAAA;AACpC,OAAO,MAAM,MAAM,UAAU,CAAA;AAG7B,MAAM,WAAW;IACf,IAAI,CAAK;IACT,MAAM,CAAQ;IACd,QAAQ,CAAK;IACb,MAAM,CAAK;IACX,SAAS,CAAK;IAEd,YAAY,IAAI,EAAE,MAAM,EAAE,QAAQ;QAChC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;QACxB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;IACtB,CAAC;IAED,YAAY;QACV,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAA;QAE9B,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;YACnB,OAAO,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;SAC/C;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;YACnB,OAAO,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;SACpE;QAED,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAA,CAAC,qCAAqC;IAChF,CAAC;IAED,KAAK,CAAC,KAAK;QACT,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAA;QAC9B,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAA;QACnC,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;YACnB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;SACjC;IACH,CAAC;IAED,OAAO;QACL,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,CAAA;IACtB,CAAC;IAED,QAAQ,CAAC,KAAK;QACZ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,OAAO,IAAI,CAAA;SACZ;QAED,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAA;QAE9B,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;YACnB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAA;SACtC;aAAM,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;YAC1B,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAA;SACpD;QAED,IAAI,CAAC,MAAM,EAAE,CAAA;QACb,OAAO,IAAI,CAAC,YAAY,EAAE,CAAA;IAC5B,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAA;YACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;SACtB;QAED,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACzC,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAA;YAC9B,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAC/B,KAAK,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CACzD,CAAA;YACD,IAAI,CAAC,SAAS;gBACZ,IAAI,CAAC,IAAI,KAAK,CAAC;oBACb,CAAC,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE,CAAC;oBAC1B,CAAC,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;SAC3C;IACH,CAAC;IAED,GAAG;QACD,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAA;QAC/B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;QAClB,IAAI,CAAC,MAAM,EAAE,CAAA;QACb,OAAO,GAAG,CAAA;IACZ,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;QAClB,IAAI,CAAC,MAAM,EAAE,CAAA;IACf,CAAC;CACF;AAED,eAAe,WAAW,CAAA\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/script/editor/tool/helper/lasso.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport Editor from '../../Editor';\r\ndeclare class LassoHelper {\r\n    mode: any;\r\n    editor: Editor;\r\n    fragment: any;\r\n    points: any;\r\n    selection: any;\r\n    constructor(mode: any, editor: any, fragment: any);\r\n    getSelection(): {\r\n        atoms: number[];\r\n        bonds: number[];\r\n        rxnArrows: number[];\r\n        rxnPluses: number[];\r\n        enhancedFlags: number[];\r\n        sgroupData: number[];\r\n        simpleObjects: number[];\r\n        texts: number[];\r\n    };\r\n    begin(event: any): void;\r\n    running(): boolean;\r\n    addPoint(event: any): {\r\n        atoms: number[];\r\n        bonds: number[];\r\n        rxnArrows: number[];\r\n        rxnPluses: number[];\r\n        enhancedFlags: number[];\r\n        sgroupData: number[];\r\n        simpleObjects: number[];\r\n        texts: number[];\r\n    } | null;\r\n    update(): void;\r\n    end(): {\r\n        atoms: number[];\r\n        bonds: number[];\r\n        rxnArrows: number[];\r\n        rxnPluses: number[];\r\n        enhancedFlags: number[];\r\n        sgroupData: number[];\r\n        simpleObjects: number[];\r\n        texts: number[];\r\n    };\r\n    cancel(): void;\r\n}\r\nexport default LassoHelper;\r\n"}}
