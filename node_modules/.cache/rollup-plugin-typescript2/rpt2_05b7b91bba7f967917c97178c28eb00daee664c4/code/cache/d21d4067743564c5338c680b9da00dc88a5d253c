{"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\n/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport * as KN from 'w3c-keyname';\r\nimport { useLayoutEffect, useRef } from 'react';\r\nimport Icon from '../../../component/view/icon';\r\nimport clsx from 'clsx';\r\nimport styles from './Dialog.module.less';\r\nconst Dialog = (props) => {\r\n    const { children, title, params, result = () => null, valid = () => !!result(), buttons = ['OK'], headerContent, footerContent, className, buttonsNameMap, needMargin = true, withDivider = false, focusable = true, ...rest } = props;\r\n    const dialogRef = useRef(null);\r\n    useLayoutEffect(() => {\r\n        if (focusable) {\r\n            ;\r\n            dialogRef.current.focus();\r\n        }\r\n        return () => {\r\n            ;\r\n            dialogRef.current\r\n                ?.closest('.Ketcher-root')\r\n                ?.getElementsByClassName('cliparea')[0].focus();\r\n        };\r\n    }, [focusable]);\r\n    const isButtonOk = (button) => {\r\n        return button === 'OK' || button === 'Save';\r\n    };\r\n    const exit = (mode) => {\r\n        const key = isButtonOk(mode) ? 'onOk' : 'onCancel';\r\n        if (params && key in params && (key !== 'onOk' || valid())) {\r\n            params[key](result());\r\n        }\r\n    };\r\n    const keyDown = (event) => {\r\n        const key = KN.keyName(event);\r\n        const active = document.activeElement;\r\n        const activeTextarea = active && active.tagName === 'TEXTAREA';\r\n        if (key === 'Escape' || (key === 'Enter' && !activeTextarea)) {\r\n            exit(key === 'Enter' ? 'OK' : 'Cancel');\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n    };\r\n    return (_jsxs(\"div\", { ref: dialogRef, role: \"dialog\", onSubmit: (event) => event.preventDefault(), onKeyDown: keyDown, tabIndex: -1, className: clsx(styles.dialog, className, params.className), ...rest, children: [_jsxs(\"header\", { className: clsx(styles.header, withDivider && styles.withDivider), children: [headerContent || _jsx(\"span\", { children: title }), _jsx(\"div\", { className: styles.btnContainer, children: _jsx(\"button\", { className: styles.buttonTop, onClick: () => exit('Cancel'), children: _jsx(Icon, { name: 'close', className: styles.closeButton }) }) })] }), _jsx(\"div\", { className: clsx(styles.body, needMargin && styles.withMargin), children: children }), (footerContent || buttons.length > 0) && (_jsxs(\"footer\", { className: styles.footer, children: [footerContent, buttons.length > 0 &&\r\n                        buttons.map((button) => typeof button !== 'string' ? (button) : (_jsx(\"input\", { type: \"button\", className: clsx(isButtonOk(button) ? styles.ok : styles.cancel, button === 'Save' && styles.save), value: buttonsNameMap && buttonsNameMap[button]\r\n                                ? buttonsNameMap[button]\r\n                                : button, disabled: isButtonOk(button) && !valid(), onClick: () => exit(button) }, button)))] }))] }));\r\n};\r\nexport default Dialog;\r\n//# sourceMappingURL=Dialog.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/node_modules/w3c-keyname/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/node_modules/@types/react/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/ui/component/view/icon.jsx","/usr/local/google/home/waich/workspace/ketcher/node_modules/clsx/clsx.d.ts"],"map":"{\"version\":3,\"file\":\"Dialog.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/script/ui/views/components/Dialog/Dialog.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/script/ui/views/components/Dialog/Dialog.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { FC, PropsWithChildren, ReactElement } from 'react';\r\ninterface DialogParamsCallProps {\r\n    onCancel: () => void;\r\n    onOk: (result: any) => void;\r\n}\r\nexport interface DialogParams extends DialogParamsCallProps {\r\n    className?: string;\r\n}\r\ninterface DialogProps {\r\n    title?: string;\r\n    params: DialogParams;\r\n    buttons?: Array<string | ReactElement>;\r\n    className?: string;\r\n    needMargin?: boolean;\r\n    withDivider?: boolean;\r\n    headerContent?: ReactElement;\r\n    footerContent?: ReactElement;\r\n    buttonsNameMap?: {\r\n        [key in string]: string;\r\n    };\r\n    focusable?: boolean;\r\n}\r\ninterface DialogCallProps {\r\n    result?: () => any;\r\n    valid?: () => boolean;\r\n}\r\ndeclare type Props = DialogProps & DialogCallProps;\r\ndeclare const Dialog: FC<PropsWithChildren & Props>;\r\nexport default Dialog;\r\n"}}
