{"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { Vec2 } from 'ketcher-core';\r\nimport clsx from 'clsx';\r\nimport classes from './InfoPanel.module.less';\r\nimport { calculateMiddleCoordsForRect, calculateScrollOffsetX, calculateScrollOffsetY } from './helpers';\r\nconst BAR_PANEL_SIZE = 32;\r\nconst LEFT_PADDING_MULTIPLIER = 3;\r\nfunction getPanelPositionRelativeToRect(clientX, clientY, sGroup, render, width, height) {\r\n    const viewportLeftLimit = BAR_PANEL_SIZE * LEFT_PADDING_MULTIPLIER + width;\r\n    const viewportBottomLimit = render?.clientArea?.clientHeight - BAR_PANEL_SIZE - height;\r\n    const viewportRightLimit = render?.clientArea?.clientWidth - BAR_PANEL_SIZE - width;\r\n    // [['M', 23, 43], ['L', 23, 24]] we should remove first elements => [[23,43], [23,24]]\r\n    const rectCoords = sGroup.hovering.attrs?.path?.map((line) => line.slice(1));\r\n    const [middleLeftSide, middleBottomSide, middleRightSide, middleTopSide] = calculateMiddleCoordsForRect(rectCoords);\r\n    if (!middleBottomSide?.x ||\r\n        !middleBottomSide?.y ||\r\n        !middleTopSide?.y ||\r\n        !middleLeftSide?.x ||\r\n        !middleLeftSide?.y ||\r\n        !middleRightSide?.x ||\r\n        !middleRightSide?.y) {\r\n        return null;\r\n    }\r\n    // Default position for panel is in the bottom;\r\n    let x = middleBottomSide.x - width / 2;\r\n    let y = middleBottomSide.y;\r\n    if (clientY > viewportBottomLimit) {\r\n        y = middleTopSide.y - height;\r\n    }\r\n    if (clientX > viewportRightLimit) {\r\n        x = middleLeftSide.x - width;\r\n        y = middleLeftSide.y - height / 2;\r\n    }\r\n    if (clientX < viewportLeftLimit) {\r\n        x = middleRightSide.x;\r\n        y = middleRightSide.y - height / 2;\r\n    }\r\n    x += calculateScrollOffsetX(render);\r\n    y += calculateScrollOffsetY(render);\r\n    return new Vec2(x, y);\r\n}\r\nconst SGroupDataRender = (props) => {\r\n    const { clientX, clientY, render, className, sGroup, sGroupData } = props;\r\n    const [wrapperHeight, setWrapperHeight] = useState(0);\r\n    const [wrapperWidth, setWrapperWidth] = useState(0);\r\n    const wrapperRef = useRef(null);\r\n    useEffect(() => {\r\n        if (wrapperRef.current) {\r\n            setWrapperHeight(wrapperRef.current.clientHeight);\r\n            setWrapperWidth(wrapperRef.current.clientWidth);\r\n        }\r\n    });\r\n    const panelCoordinate = getPanelPositionRelativeToRect(clientX, clientY, sGroup, render, wrapperWidth, wrapperHeight);\r\n    return panelCoordinate ? (_jsx(\"div\", { ref: wrapperRef, style: { left: panelCoordinate.x + 'px', top: panelCoordinate.y + 'px' }, className: clsx(classes.infoPanel, className), children: sGroupData })) : null;\r\n};\r\nexport default SGroupDataRender;\r\n//# sourceMappingURL=SGroupDataRender.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/node_modules/@types/react/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/dist/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/node_modules/clsx/clsx.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/ui/views/components/StructEditor/helpers.ts"],"map":"{\"version\":3,\"file\":\"SGroupDataRender.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/script/ui/views/components/StructEditor/SGroupDataRender.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/script/ui/views/components/StructEditor/SGroupDataRender.d.ts","writeByteOrderMark":false,"text":"import { FC } from 'react';\r\nimport { Render, SGroup, Struct } from 'ketcher-core';\r\ninterface SGroupDataRenderProps {\r\n    clientX: number;\r\n    clientY: number;\r\n    render: Render;\r\n    groupStruct: Struct;\r\n    sGroup: SGroup;\r\n    sGroupData: string | null;\r\n    className?: string;\r\n}\r\ndeclare const SGroupDataRender: FC<SGroupDataRenderProps>;\r\nexport default SGroupDataRender;\r\n"}}
