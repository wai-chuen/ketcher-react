{"code":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { useDispatch } from 'react-redux';\r\nimport { indigoVerification } from '../script/ui/state/request';\r\nimport { KetcherAsyncEvents } from 'ketcher-core';\r\nimport { useEffect } from 'react';\r\nimport { useAppContext } from './useAppContext';\r\nimport { KETCHER_INIT_EVENT_NAME } from '../constants';\r\nexport const useSubscriptionOnEvents = () => {\r\n    const dispatch = useDispatch();\r\n    const { getKetcherInstance } = useAppContext();\r\n    const loadingHandler = () => {\r\n        dispatch(indigoVerification(true));\r\n    };\r\n    const actionResultHandler = () => {\r\n        dispatch(indigoVerification(false));\r\n    };\r\n    const subscribe = (ketcher) => {\r\n        ketcher.eventBus.addListener(KetcherAsyncEvents.LOADING, loadingHandler);\r\n        ketcher.eventBus.addListener(KetcherAsyncEvents.SUCCESS, actionResultHandler);\r\n        ketcher.eventBus.addListener(KetcherAsyncEvents.FAILURE, actionResultHandler);\r\n    };\r\n    const unsubscribe = (ketcher) => {\r\n        ketcher.eventBus.removeListener(KetcherAsyncEvents.LOADING, loadingHandler);\r\n        ketcher.eventBus.removeListener(KetcherAsyncEvents.SUCCESS, actionResultHandler);\r\n        ketcher.eventBus.removeListener(KetcherAsyncEvents.FAILURE, actionResultHandler);\r\n    };\r\n    useEffect(() => {\r\n        const subscribeOnInit = () => {\r\n            subscribe(getKetcherInstance());\r\n        };\r\n        const unsubscribeOnUnMount = () => {\r\n            unsubscribe(getKetcherInstance());\r\n        };\r\n        window.addEventListener(KETCHER_INIT_EVENT_NAME, () => {\r\n            subscribeOnInit();\r\n        });\r\n        return () => {\r\n            unsubscribeOnUnMount();\r\n            window.removeEventListener(KETCHER_INIT_EVENT_NAME, subscribeOnInit);\r\n        };\r\n    }, []);\r\n};\r\n//# sourceMappingURL=useSubscribtionOnEvents.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/node_modules/@types/react-redux/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/ui/state/request/index.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/dist/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/node_modules/@types/react/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/hooks/useAppContext.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/constants.ts"],"map":"{\"version\":3,\"file\":\"useSubscribtionOnEvents.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/hooks/useSubscribtionOnEvents.ts\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;6EAc6E;AAE7E,OAAO,EAAE,WAAW,EAAE,MAAM,aAAa,CAAA;AACzC,OAAO,EAAE,kBAAkB,EAAE,MAAM,4BAA4B,CAAA;AAC/D,OAAO,EAAW,kBAAkB,EAAE,MAAM,cAAc,CAAA;AAC1D,OAAO,EAAE,SAAS,EAAE,MAAM,OAAO,CAAA;AACjC,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAA;AAC/C,OAAO,EAAE,uBAAuB,EAAE,MAAM,cAAc,CAAA;AAEtD,MAAM,CAAC,MAAM,uBAAuB,GAAG,GAAG,EAAE;IAC1C,MAAM,QAAQ,GAAG,WAAW,EAAE,CAAA;IAE9B,MAAM,EAAE,kBAAkB,EAAE,GAAG,aAAa,EAAE,CAAA;IAE9C,MAAM,cAAc,GAAG,GAAG,EAAE;QAC1B,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAA;IACpC,CAAC,CAAA;IACD,MAAM,mBAAmB,GAAG,GAAG,EAAE;QAC/B,QAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAA;IACrC,CAAC,CAAA;IAED,MAAM,SAAS,GAAG,CAAC,OAAgB,EAAE,EAAE;QACrC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,kBAAkB,CAAC,OAAO,EAAE,cAAc,CAAC,CAAA;QACxE,OAAO,CAAC,QAAQ,CAAC,WAAW,CAC1B,kBAAkB,CAAC,OAAO,EAC1B,mBAAmB,CACpB,CAAA;QACD,OAAO,CAAC,QAAQ,CAAC,WAAW,CAC1B,kBAAkB,CAAC,OAAO,EAC1B,mBAAmB,CACpB,CAAA;IACH,CAAC,CAAA;IAED,MAAM,WAAW,GAAG,CAAC,OAAgB,EAAE,EAAE;QACvC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,OAAO,EAAE,cAAc,CAAC,CAAA;QAC3E,OAAO,CAAC,QAAQ,CAAC,cAAc,CAC7B,kBAAkB,CAAC,OAAO,EAC1B,mBAAmB,CACpB,CAAA;QACD,OAAO,CAAC,QAAQ,CAAC,cAAc,CAC7B,kBAAkB,CAAC,OAAO,EAC1B,mBAAmB,CACpB,CAAA;IACH,CAAC,CAAA;IAED,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,eAAe,GAAG,GAAG,EAAE;YAC3B,SAAS,CAAC,kBAAkB,EAAE,CAAC,CAAA;QACjC,CAAC,CAAA;QAED,MAAM,oBAAoB,GAAG,GAAG,EAAE;YAChC,WAAW,CAAC,kBAAkB,EAAE,CAAC,CAAA;QACnC,CAAC,CAAA;QAED,MAAM,CAAC,gBAAgB,CAAC,uBAAuB,EAAE,GAAG,EAAE;YACpD,eAAe,EAAE,CAAA;QACnB,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,EAAE;YACV,oBAAoB,EAAE,CAAA;YACtB,MAAM,CAAC,mBAAmB,CAAC,uBAAuB,EAAE,eAAe,CAAC,CAAA;QACtE,CAAC,CAAA;IACH,CAAC,EAAE,EAAE,CAAC,CAAA;AACR,CAAC,CAAA\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/hooks/useSubscribtionOnEvents.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nexport declare const useSubscriptionOnEvents: () => void;\r\n"}}
