{"code":"import { Render } from 'ketcher-core';\r\n/**\r\n * Is used to improve search and opening tab performance in Template Dialog\r\n * Rendering a lot of structures causes great delay\r\n */\r\nconst renderCache = new Map();\r\nexport class RenderStruct {\r\n    /**\r\n     * for S-Groups we want to show expanded structure\r\n     * without brackets\r\n     */\r\n    static prepareStruct(struct) {\r\n        if (struct.sgroups.size > 0) {\r\n            const newStruct = struct.clone();\r\n            newStruct.sgroups.delete(0);\r\n            return newStruct;\r\n        }\r\n        return struct;\r\n    }\r\n    static render(el, struct, options = {}) {\r\n        if (el && struct) {\r\n            const { cachePrefix = '' } = options;\r\n            const cacheKey = `${cachePrefix}${struct.name}`;\r\n            if (renderCache.has(cacheKey)) {\r\n                el.innerHTML = renderCache.get(cacheKey);\r\n                return;\r\n            }\r\n            const preparedStruct = this.prepareStruct(struct);\r\n            preparedStruct.initHalfBonds();\r\n            preparedStruct.initNeighbors();\r\n            preparedStruct.setImplicitHydrogen();\r\n            preparedStruct.markFragments();\r\n            const rnd = new Render(el, {\r\n                autoScale: true,\r\n                ...options\r\n            });\r\n            rnd.setMolecule(preparedStruct);\r\n            rnd.update(true, options.viewSz);\r\n            renderCache.set(cacheKey, rnd.clientArea.innerHTML);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=renderStruct.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"renderStruct.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/script/ui/utils/renderStruct.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,MAAM,EAAU,MAAM,cAAc,CAAA;AAE7C;;;GAGG;AACH,MAAM,WAAW,GAAG,IAAI,GAAG,EAAE,CAAA;AAE7B,MAAM,OAAO,YAAY;IACvB;;;OAGG;IACH,MAAM,CAAC,aAAa,CAAC,MAAc;QACjC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE;YAC3B,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,EAAE,CAAA;YAChC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;YAC3B,OAAO,SAAS,CAAA;SACjB;QACD,OAAO,MAAM,CAAA;IACf,CAAC;IAED,MAAM,CAAC,MAAM,CACX,EAAsB,EACtB,MAAqB,EACrB,UAAe,EAAE;QAEjB,IAAI,EAAE,IAAI,MAAM,EAAE;YAChB,MAAM,EAAE,WAAW,GAAG,EAAE,EAAE,GAAG,OAAO,CAAA;YACpC,MAAM,QAAQ,GAAG,GAAG,WAAW,GAAG,MAAM,CAAC,IAAI,EAAE,CAAA;YAC/C,IAAI,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;gBAC7B,EAAE,CAAC,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;gBACxC,OAAM;aACP;YACD,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;YACjD,cAAc,CAAC,aAAa,EAAE,CAAA;YAC9B,cAAc,CAAC,aAAa,EAAE,CAAA;YAC9B,cAAc,CAAC,mBAAmB,EAAE,CAAA;YACpC,cAAc,CAAC,aAAa,EAAE,CAAA;YAC9B,MAAM,GAAG,GAAG,IAAI,MAAM,CAAC,EAAE,EAAE;gBACzB,SAAS,EAAE,IAAI;gBACf,GAAG,OAAO;aACX,CAAC,CAAA;YACF,GAAG,CAAC,WAAW,CAAC,cAAc,CAAC,CAAA;YAC/B,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,MAAM,CAAC,CAAA;YAChC,WAAW,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,UAAU,CAAC,SAAS,CAAC,CAAA;SACpD;IACH,CAAC;CACF\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/script/ui/utils/renderStruct.d.ts","writeByteOrderMark":false,"text":"import { Struct } from 'ketcher-core';\r\nexport declare class RenderStruct {\r\n    /**\r\n     * for S-Groups we want to show expanded structure\r\n     * without brackets\r\n     */\r\n    static prepareStruct(struct: Struct): Struct;\r\n    static render(el: HTMLElement | null, struct: Struct | null, options?: any): void;\r\n}\r\n"}}
