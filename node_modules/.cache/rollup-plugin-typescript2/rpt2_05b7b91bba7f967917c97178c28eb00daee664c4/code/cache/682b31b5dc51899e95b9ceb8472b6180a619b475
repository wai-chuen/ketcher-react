{"code":"import { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\r\n/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { useState, useRef, useCallback } from 'react';\r\nimport styled from '@emotion/styled';\r\nimport { Button, Popover } from '@mui/material';\r\nimport Icon from 'src/script/ui/component/view/icon';\r\nimport { zoomList } from 'src/script/ui/action/zoom';\r\nimport { ZoomInput, updateInputString } from './ZoomInput';\r\nconst ElementAndDropdown = styled('div') `\n  position: relative;\n`;\r\nconst DropDownButton = styled(Button) `\n  display: flex;\n  color: #000000;\n  padding-right: 0;\n  padding-left: 0;\n\n  & svg {\n    margin-left: 2px;\n    width: 16px;\n    height: 16px;\n  }\n`;\r\nconst ZoomLabel = styled('span') `\n  width: 35px;\n`;\r\nconst Dropdown = styled(Popover) `\n  & .MuiPopover-paper {\n    padding: 8px;\n    width: 175px;\n    border: none;\n    border-radius: 0px 0px 4px 4px;\n    box-shadow: 0px 30px 48px -17px rgba(160, 165, 174, 0.3);\n    box-sizing: border-box;\n  }\n`;\r\nconst DropDownContent = styled('div') `\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: white;\n`;\r\nconst ZoomControlButton = styled(Button) `\n  display: flex;\n  justify-content: space-between;\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 14px;\n  padding: 7px 8px;\n  text-transform: none;\n  color: #333333;\n`;\r\nconst ShortcutLabel = styled('span') `\n  color: #cad3dd;\n`;\r\nconst getIntegerFromString = (zoomInput) => {\r\n    const zoomNumber = parseInt(zoomInput || '');\r\n    if (isNaN(zoomNumber)) {\r\n        return 0;\r\n    }\r\n    return zoomNumber;\r\n};\r\nconst getValidZoom = (zoom, currentZoom) => {\r\n    if (zoom === 0) {\r\n        return currentZoom;\r\n    }\r\n    const minAllowed = Math.min(...zoomList) * 100;\r\n    const maxAllowed = Math.max(...zoomList) * 100;\r\n    if (zoom < minAllowed) {\r\n        return minAllowed;\r\n    }\r\n    if (zoom > maxAllowed) {\r\n        return maxAllowed;\r\n    }\r\n    return zoom;\r\n};\r\nexport const ZoomControls = ({ currentZoom, onZoom, onZoomIn, onZoomOut, disabledButtons, hiddenButtons, shortcuts }) => {\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const containerRef = useRef(null);\r\n    const inputRef = useRef(null);\r\n    const onZoomSubmit = useCallback(() => {\r\n        const inputEl = inputRef.current;\r\n        if (!inputEl) {\r\n            return;\r\n        }\r\n        const userInput = getIntegerFromString(inputEl.value);\r\n        if (userInput && userInput !== currentZoom) {\r\n            const zoomToSet = getValidZoom(userInput, currentZoom);\r\n            updateInputString(zoomToSet, inputEl);\r\n            onZoom(zoomToSet);\r\n        }\r\n        else {\r\n            updateInputString(currentZoom, inputEl);\r\n        }\r\n    }, [onZoom, currentZoom]);\r\n    const onClose = (_, reason) => {\r\n        if (reason === 'backdropClick') {\r\n            onZoomSubmit();\r\n        }\r\n        setIsExpanded(false);\r\n    };\r\n    const onExpand = () => {\r\n        setIsExpanded(true);\r\n    };\r\n    const resetZoom = () => {\r\n        onZoom(100);\r\n    };\r\n    return (_jsxs(ElementAndDropdown, { ref: containerRef, children: [_jsxs(DropDownButton, { onClick: onExpand, children: [_jsxs(ZoomLabel, { children: [Math.round(currentZoom), \"%\"] }), _jsx(Icon, { name: \"chevron\" })] }), _jsx(Dropdown, { open: isExpanded, onClose: onClose, anchorEl: containerRef.current, container: containerRef.current, anchorOrigin: {\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left'\r\n                }, children: _jsxs(DropDownContent, { children: [_jsx(ZoomInput, { onZoomSubmit: onZoomSubmit, inputRef: inputRef, currentZoom: currentZoom, shortcuts: shortcuts }), !hiddenButtons.includes('zoom-out') && (_jsxs(ZoomControlButton, { title: \"Zoom Out\", onClick: onZoomOut, disabled: disabledButtons.includes('zoom-out'), children: [_jsx(\"span\", { children: \"Zoom out\" }), _jsx(ShortcutLabel, { children: shortcuts['zoom-out'] })] })), !hiddenButtons.includes('zoom-in') && (_jsxs(ZoomControlButton, { title: \"Zoom In\", onClick: onZoomIn, disabled: disabledButtons.includes('zoom-in'), children: [_jsx(\"span\", { children: \"Zoom in\" }), _jsx(ShortcutLabel, { children: shortcuts['zoom-in'] })] })), _jsxs(ZoomControlButton, { title: \"Zoom 100%\", onClick: resetZoom, children: [_jsx(\"span\", { children: \"Zoom 100%\" }), _jsx(ShortcutLabel, { children: shortcuts.zoom })] })] }) })] }));\r\n};\r\n//# sourceMappingURL=ZoomControls.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/node_modules/@types/react/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/node_modules/@emotion/styled/types/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/node_modules/@mui/material/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/ui/component/view/icon.jsx","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/ui/action/zoom.js","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/src/script/ui/views/toolbars/TopToolbar/ZoomInput.tsx"],"map":"{\"version\":3,\"file\":\"ZoomControls.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/script/ui/views/toolbars/TopToolbar/ZoomControls.tsx\"],\"names\":[],\"mappings\":\";AAAA;;;;;;;;;;;;;;6EAc6E;AAE7E,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,OAAO,CAAA;AACrD,OAAO,MAAM,MAAM,iBAAiB,CAAA;AACpC,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,eAAe,CAAA;AAE/C,OAAO,IAAI,MAAM,mCAAmC,CAAA;AACpD,OAAO,EAAE,QAAQ,EAAE,MAAM,2BAA2B,CAAA;AACpD,OAAO,EAAE,SAAS,EAAE,iBAAiB,EAAE,MAAM,aAAa,CAAA;AAE1D,MAAM,kBAAkB,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;;CAEvC,CAAA;AAED,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,CAAA;;;;;;;;;;;CAWpC,CAAA;AAED,MAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,CAAA;;CAE/B,CAAA;AAED,MAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,CAAA;;;;;;;;;CAS/B,CAAA;AAED,MAAM,eAAe,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;;;;;;CAMpC,CAAA;AAED,MAAM,iBAAiB,GAAG,MAAM,CAAC,MAAM,CAAC,CAAA;;;;;;;;;CASvC,CAAA;AAED,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,CAAA;;CAEnC,CAAA;AAED,MAAM,oBAAoB,GAAG,CAAC,SAA6B,EAAU,EAAE;IACrE,MAAM,UAAU,GAAG,QAAQ,CAAC,SAAS,IAAI,EAAE,CAAC,CAAA;IAC5C,IAAI,KAAK,CAAC,UAAU,CAAC,EAAE;QACrB,OAAO,CAAC,CAAA;KACT;IACD,OAAO,UAAU,CAAA;AACnB,CAAC,CAAA;AAED,MAAM,YAAY,GAAG,CAAC,IAAY,EAAE,WAAmB,EAAU,EAAE;IACjE,IAAI,IAAI,KAAK,CAAC,EAAE;QACd,OAAO,WAAW,CAAA;KACnB;IAED,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,GAAG,CAAA;IAC9C,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,GAAG,CAAA;IAE9C,IAAI,IAAI,GAAG,UAAU,EAAE;QACrB,OAAO,UAAU,CAAA;KAClB;IACD,IAAI,IAAI,GAAG,UAAU,EAAE;QACrB,OAAO,UAAU,CAAA;KAClB;IACD,OAAO,IAAI,CAAA;AACb,CAAC,CAAA;AAYD,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,EAC3B,WAAW,EACX,MAAM,EACN,QAAQ,EACR,SAAS,EACT,eAAe,EACf,aAAa,EACb,SAAS,EACC,EAAE,EAAE;IACd,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAA;IAC5D,MAAM,YAAY,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAA;IACjD,MAAM,QAAQ,GAAG,MAAM,CAAmB,IAAI,CAAC,CAAA;IAE/C,MAAM,YAAY,GAAG,WAAW,CAAC,GAAG,EAAE;QACpC,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAA;QAChC,IAAI,CAAC,OAAO,EAAE;YACZ,OAAM;SACP;QACD,MAAM,SAAS,GAAG,oBAAoB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;QACrD,IAAI,SAAS,IAAI,SAAS,KAAK,WAAW,EAAE;YAC1C,MAAM,SAAS,GAAG,YAAY,CAAC,SAAS,EAAE,WAAW,CAAC,CAAA;YACtD,iBAAiB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;YACrC,MAAM,CAAC,SAAS,CAAC,CAAA;SAClB;aAAM;YACL,iBAAiB,CAAC,WAAW,EAAE,OAAO,CAAC,CAAA;SACxC;IACH,CAAC,EAAE,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,CAAA;IAEzB,MAAM,OAAO,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE;QAC5B,IAAI,MAAM,KAAK,eAAe,EAAE;YAC9B,YAAY,EAAE,CAAA;SACf;QACD,aAAa,CAAC,KAAK,CAAC,CAAA;IACtB,CAAC,CAAA;IAED,MAAM,QAAQ,GAAG,GAAG,EAAE;QACpB,aAAa,CAAC,IAAI,CAAC,CAAA;IACrB,CAAC,CAAA;IAED,MAAM,SAAS,GAAG,GAAG,EAAE;QACrB,MAAM,CAAC,GAAG,CAAC,CAAA;IACb,CAAC,CAAA;IAED,OAAO,CACL,MAAC,kBAAkB,IAAC,GAAG,EAAE,YAAY,aACnC,MAAC,cAAc,IAAC,OAAO,EAAE,QAAQ,aAC/B,MAAC,SAAS,eAAE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAc,EACjD,KAAC,IAAI,IAAC,IAAI,EAAC,SAAS,GAAG,IACR,EAEjB,KAAC,QAAQ,IACP,IAAI,EAAE,UAAU,EAChB,OAAO,EAAE,OAAO,EAChB,QAAQ,EAAE,YAAY,CAAC,OAAO,EAC9B,SAAS,EAAE,YAAY,CAAC,OAAO,EAC/B,YAAY,EAAE;oBACZ,QAAQ,EAAE,QAAQ;oBAClB,UAAU,EAAE,MAAM;iBACnB,YAED,MAAC,eAAe,eACd,KAAC,SAAS,IACR,YAAY,EAAE,YAAY,EAC1B,QAAQ,EAAE,QAAQ,EAClB,WAAW,EAAE,WAAW,EACxB,SAAS,EAAE,SAAS,GACpB,EACD,CAAC,aAAa,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CACtC,MAAC,iBAAiB,IAChB,KAAK,EAAC,UAAU,EAChB,OAAO,EAAE,SAAS,EAClB,QAAQ,EAAE,eAAe,CAAC,QAAQ,CAAC,UAAU,CAAC,aAE9C,sCAAqB,EACrB,KAAC,aAAa,cAAE,SAAS,CAAC,UAAU,CAAC,GAAiB,IACpC,CACrB,EACA,CAAC,aAAa,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CACrC,MAAC,iBAAiB,IAChB,KAAK,EAAC,SAAS,EACf,OAAO,EAAE,QAAQ,EACjB,QAAQ,EAAE,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,aAE7C,qCAAoB,EACpB,KAAC,aAAa,cAAE,SAAS,CAAC,SAAS,CAAC,GAAiB,IACnC,CACrB,EACD,MAAC,iBAAiB,IAAC,KAAK,EAAC,WAAW,EAAC,OAAO,EAAE,SAAS,aACrD,uCAAsB,EACtB,KAAC,aAAa,cAAE,SAAS,CAAC,IAAI,GAAiB,IAC7B,IACJ,GACT,IACQ,CACtB,CAAA;AACH,CAAC,CAAA\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/script/ui/views/toolbars/TopToolbar/ZoomControls.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\n/// <reference types=\"react\" />\r\ninterface ZoomProps {\r\n    currentZoom: number;\r\n    onZoom: (arg: number) => void;\r\n    onZoomIn: VoidFunction;\r\n    onZoomOut: VoidFunction;\r\n    disabledButtons: string[];\r\n    hiddenButtons: string[];\r\n    shortcuts: {\r\n        [key in string]: string;\r\n    };\r\n}\r\nexport declare const ZoomControls: ({ currentZoom, onZoom, onZoomIn, onZoomOut, disabledButtons, hiddenButtons, shortcuts }: ZoomProps) => JSX.Element;\r\nexport {};\r\n"}}
